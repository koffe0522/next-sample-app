version: 2
jobs:
  deploy_dev:
    docker:
      - image: circleci/node:8
    steps:
      - checkout # ソースコードのチェックアウト
      - run:
          name: package install
          command: npm install
      - run:
          name: handle build
          command: npm run
      - run:
          name: deploy to Firebase Hosting
          command: ./node_modules/.bin/firebase deploy --token=$FIREBASE_TOKEN

workflows:
  version: 2
  deploy_dev: # ワークフローの名前
    jobs:
      - deploy_dev: # 上で定義したジョブを指定します
        filters:
          branches:
              only: master # masterブランチのみを実行対象とします

